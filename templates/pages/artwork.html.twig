{% extends 'base.html.twig' %}
{% set artwork = poi.artworks.first %}
{% set document = artwork.documents.first %}

{% block title %}Artwork - {{ poi.address }} - {{ poi.city }} - {{ poi.country }}
{% if artwork.title %} - {{ artwork.title }}{% endif %}
{% endblock %}
{% block body_classes %}page-artwork{% endblock body_classes %}

{% block body %}
    <main role="main">
        <section class="section">
            <div class="container">
                <div class="row">
                    <div class="col-md-4 d-flex flex-column justify-content-center align-items-center">
                        <h4>{{ 'artwork.mensurations'|trans({}) }}</h4>
                        <div id="artwork-data" class="lead text-muted">
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item p-0"><span>{{ 'artwork.label.country'|trans({}) }} :</span> {{ poi.country }}</li>
                                <li class="list-group-item p-0"><span>{{ 'artwork.label.city'|trans({}) }} :</span> {{ poi.city }}</li>
                                <li class="list-group-item p-0"><span>{{ 'artwork.label.address'|trans({}) }} :</span> {{ poi.address }}</li>
                                <li class="list-group-item p-0"><span>{{ 'artwork.label.latitude'|trans({}) }} :</span> {{ poi.latitude }}</li>
                                <li class="list-group-item p-0"><span>{{ 'artwork.label.longitude'|trans({}) }} :</span> {{ poi.longitude }}</li>
                                <li class="list-group-item p-0"><span>{{ 'artwork.label.title'|trans({}) }} :</span> {{ artwork.title }}</li>
                                <li class="list-group-item p-0"><span>{{ 'artwork.label.type'|trans({}) }} :</span> {{ artwork.type }}</li>
                                <li class="list-group-item p-0"><span>{{ 'artwork.label.active'|trans({}) }} :</span> {{ artwork.enabled }}</li>
                                <li class="list-group-item p-0"><span>{{ 'artwork.label.date'|trans({}) }} :</span> {{ document.createdAt|date('d-m-Y') }}</li>
                                <li class="list-group-item p-0"><span>{{ 'artwork.label.author'|trans({}) }} :</span>
                                    {% for author in artwork.author %}
                                        <a href="{{ path('artist_profile', {'id': author.id}) }}">{{ author.name }} </a>
                                    {% endfor %}
                                </li>
                                {% if artwork.instalink %}
                                    <li class="list-group-item p-0">
                                        <a target="_blank" class="fa fa-instagram" href="{{ artwork.instaLink }}"> : {{ 'artwork.showoninsta'|trans({}) }}</a>
                                    </li>
                                {% endif %}
                                {% if artwork.contributor %}
                                    <li class="list-group-item p-0">{{ 'artwork.label.contributor'|trans({}) }} :
                                        <a href="{{ path('public_profile', {'id': artwork.contributor.id}) }}">{{ artwork.contributor.username }}</a>
                                    </li>
                                {% endif %}
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-8 d-flex flex-column justify-content-center align-items-center">
                        <div id="map" class="content-map"></div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 d-flex flex-column justify-content-center align-items-center">
                        <h4>{{ 'artwork.fullsize'|trans({}) }}</h4>
                        <div class="card-artwork">
                            <a href="{{ vich_uploader_asset(document, 'imageFile') }}" target="_blank"><img src="{{ vich_uploader_asset(document, 'imageFile') }}" alt="{{ artwork.title }}"
                                 width="100%" class="card-artwork-img"/></a>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 d-flex flex-column justify-content-center align-items-center">
                        <h4>{{ 'artwork.neighbour'|trans({}) }}</h4>
                    </div>
                </div>
                <div class="row">
                    {% for pois in poisAround %}
                        <div class="col-12 col-sm-4">
                            {% for poiEl in pois %}
                                {% set artwork = poiEl.artworks.first %}
                                {% set document = artwork.documents.first %}

                                <a href="{{ path('artwork', {'id': poiEl.id}) }}">
                                    {% include "components/card-artwork.twig" with {
                                        imgSrc: vich_uploader_asset(document, 'imageFile'),
                                        title: artwork.title,
                                        textLeft: poiEl.city ~ ', ' ~ poiEl.country,
                                        textRight: artwork.createdAt|date("d/m/Y"),
                                    } %}
                                </a>
                            {% endfor %}
                        </div>
                    {% endfor %}
                </div>
            </div>
        </section>
    </main>
{% endblock %}

{% block javascripts %}
    {{ parent() }}

    <script>
        window.datas = '{{ convertedPoi | raw }}';
    </script>

    <script src="{{ asset('build/js/map-artwork.js') }}"></script>
{% endblock %}