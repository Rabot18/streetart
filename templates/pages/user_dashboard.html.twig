{% extends 'base.html.twig' %}

{% block body_classes %}page-user-dashboard{% endblock body_classes %}

{% block body %}

    {% set nbUserArtworks = userArtworks|length %}
    {% set nbUserContries = userCountriesArtworks|length %}

    <main role="main">
        <section class="section">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <h1>{{ 'dashboard.title'|trans({}) }}</h1>
                        <p>{{ 'dashboard.introduction'|trans({'nbUserArtworks': nbUserArtworks, 'nbUserContries': nbUserContries}) }}</p>
                    </div>
                    <div class="col-12">
                        <p><a href="{{ path('fos_user_profile_edit') }}" class="btn btn-primary my-2">{{ 'profile.edit.title'|trans }}Editer mon profil</a><br /><a href="{{ path('fos_user_profile_show') }}" class="btn btn-primary my-2">{{ 'profile.edit.show'|trans }}Voir mon profil</a></p>
                    </div>
                </div>
                <div class="row">
                    {% for userArtwork in userArtworks %}
                        <div class="col-12 col-sm-3">
                            {% set document = userArtwork.documents.first %}
                            {% set poi = userArtwork.poi %}
                            <a href="{{ path('artwork', {'id': poi.id}) }}">
                                {% include "components/card-artwork.twig" with {
                                    imgSrc: vich_uploader_asset(document, 'imageFile'),
                                    title: userArtwork.title,
                                    textLeft: poi.city ~ ', ' ~ poi.country,
                                    textRight: userArtwork.createdAt|date("d/m/Y"),
                                } %}
                            </a>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </section>
    </main>
{% endblock %}